pipeline {
    agent {
        label 'maven'
    }
    options {
        disableConcurrentBuilds()
        timestamps()
        timeout(time: 1, unit: 'HOURS')
    }

    stages {
        stage('build') {
            steps {
                script {
                    echo "Cloning the repository..."
                    sh 'git clone https://github.com/AbdElRhmanArafa/java-base-appliction.git'
                    sh 'cd java-base-appliction && pwd && ls -la'            
                    echo "Building the project..."
                    echo "Maven version:"
                    sh 'cd java-base-appliction && mvn --version'
                    echo "install maven"
                    sh 'mvn install'
                    sh 'mvn clean package'
                }
            }
        }
    }
}
